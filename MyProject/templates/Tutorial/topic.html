{% extends "Tutorial/base.html" %}



<!--&lt;!&ndash; Offcanvas Side Panel (opens from the left) &ndash;&gt;-->
<!--    <div class="offcanvas offcanvas-start collapse navbar-collapse" tabindex="-1" id="sidePanel" aria-labelledby="sidePanelLabel">-->
<!--      <div class="offcanvas-header">-->
<!--        <h5 class="offcanvas-title" id="sidePanelLabel">Topics</h5>-->
<!--        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>-->
<!--      </div>-->
<!--      <div class="offcanvas-body">-->
<!--        &lt;!&ndash; Same menu items as in the navbar &ndash;&gt;-->
<!--        <ul class="navbar-nav">-->
<!--            {% for topic in topics %}-->
<!--                <div class="">-->
<!--                    <li class="nav-item">-->
<!--                        <a class="nav-link" href="{% url 'topic' concept_slug=concept.slug topic_slug=topic.slug %}">-->
<!--                {{ topic.order }}. {{ topic.title }} {# Display the topic's order and title #}&ndash;&gt;-->
<!--                    </li>-->
<!--                </div>-->
<!--            {% endfor %}-->
<!--        </ul>-->
<!--      </div>-->
<!--    </div>-->



{% block content %}
<!--  {# 1. Fixed Left Panel (Side Panel)                                          #}-->
<!--  {# -->
<!--      - "d-none d-md-block": The panel is hidden on extra-small and small screens-->
<!--        (it disappears for better readability) and shown only on medium and larger screens.-->
<!--      - "position-fixed": Keeps the panel fixed relative to the viewport.-->
<!--      - "top:70px": Positions the panel just below the fixed navbar (assumed height 70px).-->
<!--      - "height: calc(100vh - 70px)": Fills the remaining viewport height.-->
<!--      - "width:300px": A fixed width for the panel.-->
<!--  #}-->
  <!-- Fixed left sidebar: visible only on md and larger screens -->
    <div class="d-none d-md-block position-fixed sidebar-panel">
      <div class="sidebar-inner">
        <ul class="list-unstyled sidebar-list">
          {% for topic in topics %} {# Start looping through each 'topic' in the 'topics' list #}
          <li class="sidebar-item">
            <a href="{% url 'topic' concept_slug=concept.slug topic_slug=topic.slug %}" class="side-link">
              {{ topic.order }}. {{ topic.title }} {# Display the topic's order and title #}
            </a>
          </li>
          {% endfor %} {# End the loop #}
        </ul>
      </div>
    </div>






<!--  {# 2. Main Content Container                                                  #}-->
<!--  {#-->
<!--      - The container-fluid has a top margin of 70px (to sit below the navbar).-->
<!--      - We do NOT apply an inline left margin here; instead, we use a custom CSS class (.main-content)-->
<!--        to add a left margin ONLY on medium and larger screensâ€”this prevents overlapping with the fixed panel.-->
<!--      - On small screens (where the panel is hidden), no left margin is applied so the content uses the full width.-->
<!--  #}-->
  <div class="container-fluid pt-5 main-content" style="margin-top:70px;">
    <div class="row">
<!--      {# -->
<!--          Main Content Column:-->
<!--          - "col-12": Full-width on extra-small screens.-->
<!--          - "col-md-7": On medium screens and above, the grid column occupies 7/12 of the row.-->
<!--          - (Our custom CSS will add a left margin of 300px on md+)-->
<!--      #}-->
      <div class="col-12 col-md-7">
<!--        <p><strong>Content:</strong></p>-->
<!--          Previous and next buttons     -->
        <div class="container">
          <div class="row">
            <div class="col-6 text-start">
                {% if previous_topic %} {# Show button only if there is a previous topic #}
                    <a href="{% url 'topic' concept_slug=concept.slug topic_slug=previous_topic.slug %}" class="btn btn-outline-primary" role="button">
                        &laquo; Prev
                    </a>
                {% endif %}
<!--                <a href="your-previous-page-url.html" class="btn btn-outline-primary" role="button">Prev</a>-->
            </div>
            <div class="col-6 text-end">
                {% if next_topic %} {# Show button only if there is a next topic #}
                    <a href="{% url 'topic' concept_slug=concept.slug topic_slug=next_topic.slug %}" class="btn btn-outline-primary" role="button">
                        Next &raquo;
                    </a>
                {% endif %}
<!--                <a href="your-next-page-url.html" class="btn btn-outline-primary" role="button">Next</a>-->
            </div>
          </div>
        </div>
        <h2 class="row justify-content-md-center">{{ topic.title }}</h2>

        <div>
          {{ topic.content|safe }}
        </div>
<!--        {# If there are subtitles, list them and display their content #}-->
        {% if subtitles %}
          <ul>
            {% for subtitle in subtitles %}
              <li>
<!--                  link text are not so good have to fix it!-->
                <a href="#subtitle-{{ subtitle.order }}" style="color: default; font-size: 20px; text-decoration: none;"><strong>{{ subtitle.title }}</strong></a>
              </li>
            {% endfor %}
          </ul>
          {% for subtitle in subtitles %}
            <section id="subtitle-{{ subtitle.order }}">
              <h3>{{ subtitle.title }}</h3>
              <div>
                {{ subtitle.content|safe }}
              </div>
            </section>
          {% endfor %}
        {% endif %}

        <div class="container">
          <div class="row">
            <div class="col-6 text-start">
                {% if previous_topic %} {# Show button only if there is a previous topic #}
                    <a href="{% url 'topic' concept_slug=concept.slug topic_slug=previous_topic.slug %}" class="btn btn-outline-primary" role="button">
                        &laquo; {{ previous_topic.title }}
                    </a>
                {% endif %}
<!--                <a href="your-previous-page-url.html" class="btn btn-outline-primary" role="button">Prev</a>-->
            </div>
            <div class="col-6 text-end">
                {% if next_topic %} {# Show button only if there is a next topic #}
                    <a href="{% url 'topic' concept_slug=concept.slug topic_slug=next_topic.slug %}" class="btn btn-outline-primary" role="button">
                        {{ next_topic.title }} &raquo;
                    </a>
                {% endif %}
<!--                <a href="your-next-page-url.html" class="btn btn-outline-primary" role="button">Next</a>-->
            </div>
          </div>
        </div>
<!--      {# -->
<!--          Reserved Right Column:-->
<!--          - "col-12 col-md-2": On extra-small screens, it spans full width (you might hide it then),-->
<!--            and on medium+ it reserves 2/12 of the row for future content or advertisements.-->
<!--      #}-->
      <div class="col-12 col-md-2">
        <!-- Reserved space for future content -->
      </div>
    </div>
  </div>

{% endblock %}


{# block content #}

  {# Added pt-5 for top padding to account for the fixed-top navbar #}
  <div class="container-fluid pt-5 pb-3">
    <div class="row">

      {# ===================================================================== #}
      {# TOPIC LIST SIDEBAR - For Larger Screens (>=md)                         #}
      {# This column is hidden on small screens and shown as a fixed sidebar  #}
      {# ===================================================================== #}
      <div class="col-md-3 d-none d-md-block bg-light border-end pt-3"> {# bg-light for a subtle background, border-end for a separator #}
        <h5 class="mb-3 text-secondary">Topics in {{ concept.title }}</h5>
        <ul class="list-group list-group-flush">
          {% for t in concept.topics.all|dictsort:"order" %}
            <li class="list-group-item {% if t.slug == topic.slug %}active{% endif %}">
              <a class="nav-link {% if t.slug == topic.slug %}text-white{% else %}text-dark{% endif %}"
                 href="{% url 'topic' concept_slug=concept.slug topic_slug=t.slug %}">
                {{ t.order }}. {{ t.title }}
              </a>
            </li>
          {% endfor %}
        </ul>
      </div>

      {# ===================================================================== #}
      {# MAIN CONTENT AREA                                                     #}
      {# Spans full width on small screens, and shrinks for sidebar on larger #}
      {# ===================================================================== #}
      <div class="col-12 col-md-9">
        <div class="px-md-3"> {# Add horizontal padding for content #}
          {# Toggle button for the Offcanvas on small screens #}
          <div class="d-block d-md-none mb-3">
            <button class="btn btn-outline-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#topicOffcanvas" aria-controls="topicOffcanvas">
              <i class="bi bi-list me-2"></i> {# Add a Bootstrap Icon, ensure you have Bootstrap Icons loaded in base.html #}
            </button>
          </div>

          <h1 class="display-5 fw-bold mb-3">{{ topic.title }}</h1>
          <p class="lead text-muted mb-4">{{ topic.tagline }}</p>

          <hr>

          {# CKEditor5Field content #}
          <div class="ck-content mb-5"> {# Add some bottom margin to content #}
            {{ topic.content|safe }}
          </div>

          {# Previous/Next Topic Navigation #}
          <div class="row mt-5 pt-3 border-top"> {# Added border-top for visual separation #}
            <div class="col-6 text-start">
                {% if prev_topic %} {# Show button only if there is a previous topic #}
                    <a href="{% url 'topic' concept_slug=concept.slug topic_slug=prev_topic.slug %}" class="btn btn-outline-primary" role="button">
                        &laquo; {{ prev_topic.title }}
                    </a>
                {% endif %}
            </div>
            <div class="col-6 text-end">
                {% if next_topic %} {# Show button only if there is a next topic #}\
                    <a href="{% url 'topic' concept_slug=concept.slug topic_slug=next_topic.slug %}" class="btn btn-outline-primary" role="button">
                        {{ next_topic.title }} &raquo;
                    </a>
                {% endif %}
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  {# ===================================================================== #}
  {# TOPIC LIST OFFCAVAS - For Smaller Screens (<md)                       #}
  {# This offcanvas overlaps content and is triggered by the button above #}
  {# ===================================================================== #}
  <div class="offcanvas offcanvas-start" tabindex="-1" id="topicOffcanvas" aria-labelledby="topicOffcanvasLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="topicOffcanvasLabel">Topics in {{ concept.title }}</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <ul class="list-group list-group-flush">
        {% for t in concept.topics.all|dictsort:"order" %}
          <li class="list-group-item {% if t.slug == topic.slug %}active{% endif %}">
            <a class="nav-link {% if t.slug == topic.slug %}text-white{% else %}text-dark{% endif %}"
               href="{% url 'topic' concept_slug=concept.slug topic_slug=t.slug %}">
              {{ t.order }}. {{ t.title }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>

{# endblock #}








<!-- for edit option of the content(concept) for admin users only-->
<!--{% if user.is_staff %}-->
<!--<a href="{% url 'admin:Tutorial_concept_change' concept.pk %}">Edit Concept</a>-->
<!--{% endif %}-->

<!-- for edit option of the content(subtitle) for admin users only-->
<!--{% if user.is_staff %}-->
<!--  <a href="{% url 'admin:Tutorial_subtitle_change' subtitle.pk %}">Edit Subtitle</a>-->
<!--{% endif %}-->
